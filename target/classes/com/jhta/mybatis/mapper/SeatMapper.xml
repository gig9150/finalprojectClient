<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jhta.mybatis.mapper.seat">
	<select id="getinfo" parameterType="int" resultType="seat">
		select *
		from seat where replyNum=#{replyNum}
	</select>
	<select id="scount" parameterType="int" resultType="hashmap">
		select
		t.theatherNum theatherNum, count(*) cnt from theather t, seat s,
		branch b
		where t.theatherNum=s.theatherNum and t.branchNum=b.branchnum
		group by t.theathernum, b.branchNum
		having t.branchnum=#{branchNum}
	</select>
	<select id="leftseat" parameterType="hashmap" resultType="int">
		select 
        (select count(*) from seat where theatherNum=#{theatherNum})-(select nvl(count(*),0) from book where mscheduleNum=#{mscheduleNum})
    	from dual
	</select>
</mapper>